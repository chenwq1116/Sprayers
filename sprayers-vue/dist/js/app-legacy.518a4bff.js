(function(){"use strict";var t={2757:function(t,e,n){n(6992),n(8674),n(9601),n(7727);var i=n(144),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("sprayers-header"),n("sprayers-main")],1)},s=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("sprayers-side",{attrs:{title:t.title_Note}},t._l(t.notes,(function(e,i){return n("span",{key:i,staticClass:"main-group",on:{click:function(n){return t.toNoteContent(e.name)}}},[t._v(t._s(e.name))])})),0),n("div",{staticClass:"main-content"},[n("router-view")],1),n("sprayers-side",{attrs:{title:t.title_HotTop}},t._l(t.topicTop,(function(e,i){return n("span",{key:i,staticClass:"main-group",on:{click:function(n){return t.toTopicContent(e.name)}}},[t._v(t._s(e.name))])})),0)],1)},a=[],c=n(3019),u=(n(4916),n(5306),n(8757),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-basic main-side"},[n("h1",[t._v(t._s(t.title))]),n("div",{staticClass:"side-group"},[t._t("default")],2)])}),l=[],m={name:"SprayersSide",props:["title"]},p=m,d=n(1001),f=(0,d.Z)(p,u,l,!1,null,null,null),h=f.exports,g=n(629),v={name:"SprayersMain",components:{sprayersSide:h},computed:(0,c.Z)({},(0,g.rn)({topicTop:function(t){return t.content.topicTop},notes:function(t){return t.content.note}})),data:function(){return{title_Note:"Note",title_HotTop:"Hot Topic"}},created:function(){this.getTopicTop(),this.getNoteList()},methods:(0,c.Z)((0,c.Z)({},(0,g.nv)({getTopicTop:"content/getTopicTop",getNoteList:"content/getNoteList"})),{},{toTopicContent:function(t){t=t.replaceAll("#","%23"),window.location="/#/topic/"+t},toNoteContent:function(t){t=t.replaceAll("$","%24"),window.location="/#/note/"+t}})},_=v,y=(0,d.Z)(_,r,a,!1,null,null,null),C=y.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{staticClass:"contains header-contains"},[t._m(0),n("div",{staticClass:"contains-right"},[n("div",{staticClass:"menu"},t._l(t.menuRouter,(function(e,i){return n("router-link",{key:i,staticClass:"menu-item",attrs:{to:e.to}},[n("div",[t._v(t._s(e.name))])])})),1)])])])},w=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contains-left"},[n("img",{attrs:{src:"sprayers.png"}})])}],k={name:"SprayersHeader",data:function(){return{menuRouter:[{name:"HomeðŸ¡",to:"/"}]}}},x=k,L=(0,d.Z)(x,b,w,!1,null,null,null),T=L.exports,S={name:"App",components:{SprayersMain:C,SprayersHeader:T}},E=S,D=(0,d.Z)(E,o,s,!1,null,null,null),Z=D.exports,j=(n(8309),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-home"},[n("div",{staticClass:"content-basic home-top"},[n("sprayers-text-area",{attrs:{submitType:"home"}})],1),t._l(t.sprayersData,(function(t,e){return n("sprayers-box",{key:e,attrs:{sprayersData:t}})}))],2)}),I=[],P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-basic home-textArea"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{maxlength:t.maxLengthLimit},domProps:{value:t.message},on:{input:[function(e){e.target.composing||(t.message=e.target.value)},function(e){return t.textMsg()}],change:function(e){return t.textMsg()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.shiftKey?t.submitContent():null}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.uploadFiles.length>0,expression:"uploadFiles.length > 0"}],staticClass:"home-img"},t._l(t.uploadFiles,(function(e,i){return n("div",{key:i,staticClass:"img"},[n("img",{staticClass:"img-bottom",attrs:{src:e.data}}),n("img",{staticClass:"imgs-top",attrs:{src:"del.png"},on:{click:function(e){return t.delImg(i)}}})])})),0),n("div",{staticClass:"home-bottom"},["home"==t.submitType?n("div",{staticClass:"home-tool"},[n("div",{staticClass:"tool-btn"},[n("div",{on:{click:function(e){return t.isShowEmoji()}}},[t._v("ðŸ˜ƒ")]),n("VEmojiPicker",{directives:[{name:"show",rawName:"v-show",value:t.isEmoji,expression:"isEmoji"}],on:{select:t.selectEmoji}})],1),n("div",{staticClass:"tool-btn"},[n("input",{staticClass:"input-file",attrs:{type:"file",accept:"image/*",multiple:"true"},on:{change:function(e){return t.getFiles(e)}}}),t._v(" ðŸ“· ")])]):t._e(),"home"!=t.submitType?n("div",{staticClass:"home-tool"},[n("div",{staticClass:"tool-btn"},[n("div",{on:{click:function(e){return t.isShowEmoji()}}},[t._v("ðŸ˜ƒ")]),n("VEmojiPicker",{directives:[{name:"show",rawName:"v-show",value:t.isEmoji,expression:"isEmoji"}],on:{select:t.selectEmoji}})],1)]):t._e(),n("div",{staticClass:"home-send"},[n("div",[t._v(" "+t._s(t.maxlength)+"/120")]),n("button",{staticClass:"comment-btn",attrs:{type:"button"},on:{click:function(e){return t.submitContent()}}},[t._v("ðŸ—£")])])])])},$=[];n(561),n(3210),n(4723);function B(t){var e=new Date(t);return e.toLocaleString()}function N(t){var e,n=/#[a-zA-Z0-9\u4e00-\u9fa5]*#/g,i=t.match(n);for(e in console.log("topic:"+i),i){var o=i[e],s="<a href='#/topic/"+o.replaceAll("#","%23")+"'>"+o+"</a>";t=t.replace(o,s)}return t}function O(t){var e,n=/\$[a-zA-Z0-9\u4e00-\u9fa5]*\$/g,i=t.match(n);for(e in i){var o=i[e],s="<a href='#/note/"+o.replaceAll("$","%24")+"'>"+o+"</a>";t=t.replace(o,s)}return t}function M(t,e){return t.match(e)}function A(t){var e=/#[a-zA-Z0-9\u4e00-\u9fa5]*#/g;return M(t,e)}function F(t){var e=/\$[a-zA-Z0-9\u4e00-\u9fa5]*\$/g;return M(t,e)}function z(t){var e=i["default"].$cookies.get(t);return e}function H(t,e){i["default"].$cookies.set(t,e,180)}var R={name:"SprayersTextArea",props:{submitType:{type:String,default:""},id:{type:String,default:""}},data:function(){return{message:"",text:"",isEmoji:!1,uploadFiles:[],maxlength:0,maxLengthLimit:120,picturesLengthLimit:9,picturesErrorMsg:"Pictures more than 9",messageErrorMsg:"Message more than 120",picturesSizeLimitErrorMsg:"Pictures more than 10m",uploadSizeLimit:10240}},computed:{isUploadOverSizeLimit:function(){var t,e=!1,n=0,i=this.uploadFiles;for(t in i){var o=i[t];null!=o&&(n+=o.size)}return this.uploadSizeLimit<=n&&(e=!0),e}},methods:(0,c.Z)((0,c.Z)((0,c.Z)({},(0,g.nv)({submitContentActions:"content/submitContent",getContentList:"content/getContentList",getContentByParentId:"content/getContentByParentId",insertTopics:"content/insertTopics",insertNote:"content/insertNote"})),(0,g.OI)({addContentList:"content/addContentList",addCommentById:"content/addCommentById"})),{},{delImg:function(t){this.uploadFiles.splice(t,1)},selectEmoji:function(t){this.message+=t.data,this.isEmoji=!1,this.textMsg()},isShowEmoji:function(){return this.isEmoji?this.isEmoji=!1:this.isEmoji=!0,this.isEmoji},getFiles:function(t){var e,n=this,i=t.target.files,o=function(){var t=i[e];s=new FileReader,s.readAsDataURL(t);var o="",r=n;s.onload=function(){o=this.result.substring(this.result.indexOf(",")+1);var e={name:t.name,data:"data:image/png;base64,"+o};r.uploadFiles.push(e)}};for(e in i){var s;o()}},textMsg:function(){this.maxlength=this.message.length},submitContent:function(){var t=this.message.trim();if(t.length<=0)alert("Message is Empty");else if(this.message.length>this.maxLengthLimit)alert(this.messageErrorMsg);else if(this.uploadFiles.length>this.picturesLengthLimit)alert(this.picturesErrorMsg);else if(this.isUploadOverSizeLimit)alert(this.picturesSizeLimitErrorMsg);else{var e=A(this.message),n=F(this.message),i={content:this.message,imgs:this.uploadFiles,parentId:this.id,createDate:new Date,topics:e,note:n},o=this;this.submitContentActions(i).then((function(t){t&&(o.id.length>0?o.getContentByParentId(o.id):o.getContentList({id:""}),H(t.data.insertedId,!0),o.message="",o.uploadFiles=[],console.log("topics="+e+",note="+n),o.insertTopics(e).catch((function(t){t&&console.log(t)})),o.insertNote(n).catch((function(t){t&&console.log(t)})))}))}}})},U=R,q=(0,d.Z)(U,P,$,!1,null,null,null),V=q.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-basic box"},[n("div",{staticClass:"box-content"},[n("p",{staticClass:"content-date"},[t._v(" "+t._s(t._f("dateFormat_y_m_d_hm")(t.sprayersData.createDate))+" "),t.isWithdraw()?n("span",{staticClass:"width-draw",on:{click:function(e){return t.withdraw()}}},[t._v("â†©ï¸")]):t._e()]),n("p",{staticClass:"content-text",domProps:{innerHTML:t._s(t.sprayersData.content)}}),n("div",{staticClass:"content-img"},[n("viewer",t._l(t.sprayersData.imgs,(function(t,e){return n("img",{key:e,attrs:{src:t.data}})})),0)],1)]),n("sprayers-comment",{attrs:{id:t.sprayersData._id}})],1)},K=[],G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-basic"},[n("div",{staticClass:"box-bottom"},[n("div",{class:["bottom-btn","Comment"===t.active?"active":""],on:{click:function(e){return t.isShowComment()}}},[t._v("âŒ¨ï¸ "+t._s(t.countComment))]),n("div",{staticClass:"bottom-btn",on:{click:function(e){return t.likeToSubmit(t.id)}}},[t._v("ðŸ‘ "+t._s(t.countLike))])]),t.showComment?n("div",{staticClass:"box-comment"},[n("sprayers-text-area",{attrs:{submitType:"Comment"===t.active?"Transmit":"Comment",id:t.id}}),n("div",{staticClass:"comment-list"},t._l(t.sprayersComment[t.id],(function(e,i){return n("p",{key:i,staticClass:"content-list"},[t._v(" "+t._s(t._f("dateFormat_y_m_d_hm")(e.createDate))+": "+t._s(e.content)+" ")])})),0)],1):t._e()])},J=[],Q={components:{SprayersTextArea:V},name:"SprayersComment",props:{id:{type:String,default:""}},computed:(0,c.Z)({},(0,g.rn)({sprayersComment:function(t){return t.content.sprayersComment}})),data:function(){return{sprayersData:[],showComment:!1,active:"",countComment:0,countLike:0}},created:function(){var t=this;this.countCommentByParentId(this.id).then((function(e){t.countComment=e.data})),this.getLike(this.id).then((function(e){t.countLike=e.data}))},methods:(0,c.Z)((0,c.Z)({},(0,g.nv)({getContentByParentId:"content/getContentByParentId",countCommentByParentId:"content/countCommentByParentId",likeSubmit:"content/likeSubmit",getLike:"content/getLike"})),{},{isShowComment:function(){return this.active="Comment",this.showComment?(this.active="",this.showComment=!1):(this.id.length>0&&this.getContentByParentId(this.id),this.showComment=!0),this.showComment},likeToSubmit:function(t){++this.countLike,this.likeSubmit(t)}})},X=Q,Y=(0,d.Z)(X,G,J,!1,null,null,null),tt=Y.exports,et={components:{SprayersComment:tt},name:"SprayersBox",props:["sprayersData"],methods:(0,c.Z)((0,c.Z)({},(0,g.nv)({contentDelete:"content/contentDelete",getContentList:"content/getContentList"})),{},{toInfo:function(t){this.$router.push({name:"info",params:{sprayersData:t},query:{id:t._id}})},isWithdraw:function(){return z(this.sprayersData._id)},withdraw:function(){var t=this;this.contentDelete(this.sprayersData._id).then((function(e){console.log(e),t.getContentList({id:""})}))}})},nt=et,it=(0,d.Z)(nt,W,K,!1,null,null,null),ot=it.exports,st={name:"ContentHome",components:{SprayersTextArea:V,SprayersBox:ot},computed:(0,c.Z)({},(0,g.rn)({sprayersData:function(t){return t.content.sprayersData}})),data:function(){return{}},created:function(){var t=this,e={id:"",topic:this.$route.params.topic,note:this.$route.params.note};this.$watch((function(){return t.$route.params}),(function(n){e.topic=n.topic,e.note=n.note,t.getContentList(e)})),this.getContentList(e)},methods:(0,c.Z)({},(0,g.nv)({getContentList:"content/getContentList"}))},rt=st,at=(0,d.Z)(rt,j,I,!1,null,null,null),ct=at.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-basic"},[n("div",{staticClass:"content-info"},[n("div",{staticClass:"box-content",on:{click:function(e){return t.toInfo()}}},[n("p",{staticClass:"content-text"},[t._v(" "+t._s(t.infoData.content)+" ")]),n("div",{staticClass:"content-img"},[n("viewer",t._l(t.infoData.imgs,(function(t,e){return n("img",{key:e,attrs:{src:t.data}})})),0)],1)])]),n("sprayers-comment",{attrs:{sprayersInfo:t.infoData.info}}),t._l(t.sprayersData,(function(e,i){return n("p",{key:i,staticClass:"content-list"},[t._v(" "+t._s(e.content)+" ")])}))],2)},lt=[],mt={components:{SprayersComment:tt},name:"ContentInfo",data:function(){return{infoData:this.$route.params.sprayersData,id:this.$route.query.id,sprayersData:[{name:"nick name",date:"Today 23:37",content:"sdfwe"},{name:"nick name",date:"Today 23:37",content:"fskfjkasjfdsajdflkjsdlf"}]}},methods:(0,c.Z)({},(0,g.nv)({getContentById:"content/getContentById"}))},pt=mt,dt=(0,d.Z)(pt,ut,lt,!1,null,null,null),ft=dt.exports,ht=n(8345),gt=n(9669),vt=n.n(gt),_t={get_content_list:function(t){return vt().post("/api/",t)},submit_content:function(t){return vt().post("/api/submit",t)},get_content_by_id:function(t){return vt().get("/api/get?id="+t)},get_content_by_parent_id:function(t){return vt().get("/api/getByParentId?id="+t)},count_comment_by_parent_id:function(t){return vt().get("/api/countComment?id="+t)},like_width_id:function(t){return vt().get("/api/like/?id="+t)},get_like_by_id:function(t){return vt().get("/api/like/getLike?id="+t)},get_topic_top:function(){return vt().get("/api/topic/getTopicTop")},trends_topic:function(t){if(null!=t&&""!=t)return vt().get("/api/topic/?topic="+t)},insert_Topics:function(t){return vt().post("/api/topic/insertTopic",t)},get_note_list:function(){return vt().get("/api/note/getNoteList")},insert_Note:function(t){return vt().post("api/note/insert",t)},content_delete:function(t){return vt().get("/api/delete/?id="+t)}};i["default"].use(ht.Z);var yt=[{path:"/",name:"home",component:ct},{path:"/topic/:topic",name:"topic",component:ct},{path:"/note/:note",name:"note",component:ct},{path:"/info",name:"info",component:ft}],Ct=new ht.Z({routes:yt});Ct.beforeEach((function(t,e,n){if("topic"==t.name){var i=t.params.topic.replaceAll("#","%23");_t.trends_topic(i)}n()}));var bt=Ct,wt=n(9784),kt=n(5273),xt=n.n(kt),Lt=n(2346);n(2222),n(1539);function Tt(t,e,n){return new Promise((function(i,o){t.then((function(t){t.status?(e.commit(n,t),i(!0)):(e.commit(n,t),o(!1))}),(function(t){var e=t.response;500==e.status&&alert(e.data),o(t.response)}))}))}function St(t){return new Promise((function(e,n){t.then((function(t){t.status?e(t):n(t)}),(function(t){var e=t.response;500==e.status&&alert(e.data),n(t.response)}))}))}var Et={sprayersData:[],sprayersComment:{},topicTop:[],note:[]},Dt={getContentList:function(t,e){var n;for(n in e.data){var i=e.data[n];i.content=N(i.content),i.content=O(i.content)}t.sprayersData=e.data},addContentList:function(t,e){t.sprayersData=t.sprayersData.concat(e.data)},getCommentById:function(t,e){e.data.length>0&&i["default"].set(t.sprayersComment,e.data[0].parentId,e.data)},addCommentById:function(t,e){var n=t.sprayersComment[e.parentId];n||(n=[]),n.push(e),i["default"].set(t.sprayersComment,e.parentId,n)},getTopicTop:function(t,e){e&&(t.topicTop=e.data)},getNoteList:function(t,e){e&&(t.note=e.data)}},Zt={getContentList:function(t,e){var n="getContentList";return e.id.length>0&&(n="addContentList"),Tt(_t.get_content_list(e),t,n)},submitContent:function(t,e){return St(_t.submit_content(e))},getContentById:function(t,e){return St(_t.get_content_by_id(e))},getContentByParentId:function(t,e){return Tt(_t.get_content_by_parent_id(e),t,"getCommentById")},countCommentByParentId:function(t,e){return St(_t.count_comment_by_parent_id(e))},likeSubmit:function(t,e){return St(_t.like_width_id(e))},getLike:function(t,e){return St(_t.get_like_by_id(e))},getTopicTop:function(t){return Tt(_t.get_topic_top(),t,"getTopicTop")},insertTopics:function(t,e){return St(_t.insert_Topics(e))},insertNote:function(t,e){return St(_t.insert_Note(e))},getNoteList:function(t){return Tt(_t.get_note_list(),t,"getNoteList")},contentDelete:function(t,e){return St(_t.content_delete(e))}},jt={namespaced:!0,actions:Zt,state:Et,mutations:Dt};i["default"].use(g.ZP);var It=new g.ZP.Store({debug:!0,state:{message:"every sprayer is create by yourself"},modules:{content:jt},getters:{sprayersData:function(){return jt.state.sprayersData}}});n(7327);i["default"].filter("dateFormat_y_m_d_hm",(function(t){return B(t)})),i["default"].filter("analyse_topic_to_html",(function(t){return N(t)})),i["default"].filter("analyse_note_to_html",(function(t){return O(t)}));var Pt=n(6123),$t=n.n(Pt),Bt=!0;window.onscroll=function(){var t=window.document.scrollingElement,e=t.scrollTop,n=t.clientHeight,i=t.scrollHeight,o=It.getters.sprayersData;if(e+n>.9*i&&Bt&&o.length>=20){Bt=!1;var s=o[o.length-1];null==s&&(s={_id:""});var r="";null!=bt.history.current.params.topic&&(r=bt.history.current.params.topic);var a={id:s._id,topic:r};It.dispatch("content/getContentList",a).then((function(t){t&&(Bt=!0)}))}},i["default"].config.productionTip=!1,i["default"].use(wt.ZP),i["default"].use(xt()),i["default"].use(Lt.Z,vt()),i["default"].use($t()),new i["default"]({render:function(t){return t(Z)},router:bt,store:It}).$mount("#app")}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=t,function(){n.amdO={}}(),function(){var t=[];n.O=function(e,i,o,s){if(!i){var r=1/0;for(l=0;l<t.length;l++){i=t[l][0],o=t[l][1],s=t[l][2];for(var a=!0,c=0;c<i.length;c++)(!1&s||r>=s)&&Object.keys(n.O).every((function(t){return n.O[t](i[c])}))?i.splice(c--,1):(a=!1,s<r&&(r=s));if(a){t.splice(l--,1);var u=o();void 0!==u&&(e=u)}}return e}s=s||0;for(var l=t.length;l>0&&t[l-1][2]>s;l--)t[l]=t[l-1];t[l]=[i,o,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,s,r=i[0],a=i[1],c=i[2],u=0;if(r.some((function(e){return 0!==t[e]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(c)var l=c(n)}for(e&&e(i);u<r.length;u++)s=r[u],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(l)},i=self["webpackChunksprayers_vue"]=self["webpackChunksprayers_vue"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(2757)}));i=n.O(i)})();
//# sourceMappingURL=app-legacy.518a4bff.js.map